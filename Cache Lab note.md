# Cache Lab note

## Knowledge Preparation

the usage of enum

#idndef #define #endif

```c++
char myarray[5] = {'-', '1', '2', '3', '\0'};
int i;
sscanf(myarray, "%d", &i);
```

继承的时候再父类前面要加访问控制符

switch的用法

```c++
    switch (p_args[0]) {
        case SMALL:
            this->bs = 8;
            break;
        case MID:
            this->bs = 16;
            break;
        case BIG:
            this->bs = 32;
            break;
        default:
            printf("Invalid block size!\n");
            exit(-1);
    }
```



## 缺失率统计

* LRU, ALLOC，Write Back

|          | 8B                                     | 32B                                    | 64B                                    |
| -------- | -------------------------------------- | -------------------------------------- | -------------------------------------- |
| 全相联   |                                        |                                        |                                        |
| 直接映射 | 0.233961, 0.020615, 0.049447, 0.036668 | 0.098377, 0.013311, 0.021968, 0.023138 | 0.052681, 0.015897, 0.014595, 0.018940 |
| 4-way    | 0.232791, 0.012170, 0.045759, 0.020712 | 0.096299, 0.003063, 0.018245, 0.011357 | 0.050099, 0.001544, 0.010837, 0.008531 |
| 8-way    | 0.232848, 0.012170, 0.045759, 0.017902 | 0.096275, 0.003063, 0.018245, 0.008222 | 0.050001, 0.001544, 0.010837, 0.006245 |



* 8B， 8-way,  Write_Back

|                 | LRU      | Random   | Binary Tree |
| --------------- | -------- | -------- | ----------- |
| astar.trace     | 0.232848 | 0.232844 | 0.235299    |
| bzip2.trace     | 0.012170 | 0.012714 | 0.013998    |
| mcf.trace       | 0.045759 | 0.046195 | 0.046000    |
| perlbench.trace | 0.017902 | 0.022209 | 0.077353    |



* 8B,  8-way, LRU

|                 | ALLOC_THROUGH | ALLOC_BACK | UNALLOC_THROUGH | UNALLOC_BACK |
| --------------- | ------------- | ---------- | --------------- | ------------ |
| astar.trace     | 0.232848      | 0.232848   | 0.344989        | 0.344989     |
| bzip2.trace     | 0.012170      | 0.012170   | 0.086699        | 0.086699     |
| mcf.trace       | 0.045759      | 0.045759   | 0.111469        | 0.111469     |
| perlbench.trace | 0.017902      | 0.017902   | 0.046634        | 0.046634     |



## bzip2.trace

* LRU, ALLOC_BACK

|          | 8B       | 32B      | 64B      |
| -------- | -------- | -------- | -------- |
| 全相联   |          |          |          |
| 直接映射 | 0.983915 | 0.987016 | 0.989315 |
| 4-way    | 0.982842 | 0.976349 | 0.972672 |
| 8-way    | 0.976194 | 0.966267 | 0.963118 |



* 8B， 8-way, ALLOC_BACK

| LRU      | Random   | Binary Tree |
| -------- | -------- | ----------- |
| 0.976194 | 0.996596 | 0.994113    |



* 8B,  8-way, LRU

| ALLOC_THROUGH | ALLOC_BACK | UNALLOC_THROUGH | UNALLOC_BACK |
| ------------- | ---------- | --------------- | ------------ |
| 0.976194      | 0.976194   | 0.820912        | 0.820912     |



## mcf.trace

* LRU, ALLOC_BACK

|          | 8B   | 32B  | 64B  |
| -------- | ---- | ---- | ---- |
| 全相联   |      |      |      |
| 直接映射 |      |      |      |
| 4-way    |      |      |      |
| 8-way    |      |      |      |



* 8B， 8-way, ALLOC_BACK

| LRU  | Random | Binary Tree |
| ---- | ------ | ----------- |
|      |        |             |



* 8B,  8-way, LRU

| ALLOC_THROUGH | ALLOC_BACK | UNALLOC_THROUGH | UNALLOC_BACK |
| ------------- | ---------- | --------------- | ------------ |
|               |            |                 |              |



## perlbench.trace

* LRU, ALLOC_BACK

|          | 8B   | 32B  | 64B  |
| -------- | ---- | ---- | ---- |
| 全相联   |      |      |      |
| 直接映射 |      |      |      |
| 4-way    |      |      |      |
| 8-way    |      |      |      |



* 8B， 8-way, ALLOC_BACK

| LRU  | Random | Binary Tree |
| ---- | ------ | ----------- |
|      |        |             |



* 8B,  8-way, LRU

| ALLOC_THROUGH | ALLOC_BACK | UNALLOC_THROUGH | UNALLOC_BACK |
| ------------- | ---------- | --------------- | ------------ |
|               |            |                 |              |

